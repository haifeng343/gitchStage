webpackJsonp([34],{"9krJ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("lC5x"),r=a.n(o),s=a("J0Oq"),i=a.n(s),n=a("mFSD"),l={name:"basetable",data:function(){return{addVisible:!1,editVisible:!1,addForm:{remainStock:"",useStock:"",totalStock:""},editForm:{changeMoney:"",Reason:""},editrules:{changeMoney:[{validator:function(e,t,a){if(!t)return a(new Error("变更金额不能为空"));0==t?a(new Error("变更金额不能为0")):parseFloat(t)?a():a(new Error("请输入正确的金额"))},required:!0,trigger:"blur"}],Reason:[{required:!0,message:"请输入原因",trigger:"blur"}]}}},created:function(){this._getStockInfo()},computed:{},methods:{openSet:function(e){this.editVisible=!0},save:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a={ChangeMoney:parseFloat(t.editForm.changeMoney),Reason:t.editForm.Reason};Object(n.i)(a).then(function(e){e.Success?(t.$message({showClose:!0,message:"修改成功",type:"success"}),t._getStockInfo(),t.editVisible=!1):t.$message.error(e.Message)})})},_getStockInfo:function(){var e=this;return i()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={},t.next=3,Object(n.f)(a).then(function(t){e.addForm.remainStock=t.Data.RemainStock,e.addForm.useStock=t.Data.UseStock,e.addForm.totalStock=t.Data.TotalStock});case 3:case"end":return t.stop()}},t,e)}))()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}}),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"}),e._v(" "),a("div",{staticClass:"box"},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"150px"}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"剩余库存数量(分):"}},[a("el-input",{attrs:{disabled:""},model:{value:e.addForm.remainStock,callback:function(t){e.$set(e.addForm,"remainStock",t)},expression:"addForm.remainStock"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{label:"已用库存数量(分):"}},[a("el-input",{attrs:{disabled:""},model:{value:e.addForm.useStock,callback:function(t){e.$set(e.addForm,"useStock",t)},expression:"addForm.useStock"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{label:"累计库存数量(分):"}},[a("el-input",{attrs:{disabled:""},model:{value:e.addForm.totalStock,callback:function(t){e.$set(e.addForm,"totalStock",t)},expression:"addForm.totalStock"}})],1)],1),e._v(" "),a("span",[a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){e.openSet("addForm")}}},[e._v("库存设定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"库存设定",visible:e.editVisible,width:"633px"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editrules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"当前库存数量:"}},[a("span",[e._v(e._s(e.addForm.remainStock))])]),e._v(" "),a("el-form-item",{attrs:{label:"变更金额(分):",prop:"changeMoney"}},[a("el-input",{attrs:{placeholder:"请输入变更金额"},model:{value:e.editForm.changeMoney,callback:function(t){e.$set(e.editForm,"changeMoney",t)},expression:"editForm.changeMoney"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"变更原因:",prop:"Reason"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入变更原因"},model:{value:e.editForm.Reason,callback:function(t){e.$set(e.editForm,"Reason",t)},expression:"editForm.Reason"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn1",attrs:{type:"primary"},on:{click:function(t){e.save("editForm")}}},[e._v("提 交")])],1)],1)],1)],1)},staticRenderFns:[]};var d=a("C7Lr")(l,c,!1,function(e){a("b0xr")},"data-v-62b2b9c7",null);t.default=d.exports},b0xr:function(e,t){}});