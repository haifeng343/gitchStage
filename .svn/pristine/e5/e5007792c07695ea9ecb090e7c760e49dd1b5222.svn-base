webpackJsonp([18],{rKKF:function(e,t){},txYZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("CcaF"),r={name:"basetable",data:function(){return{tableData:[],cur_page:1,name:"",Id:"",templateList:[],template:"",accountid:"",pageCount:0,pagesize:10,editVisible:!1,addVisible:!1,Path:"",Form:{name:"",price:""},addForm:{name:"",basePrice:"",minCount:"",sale:"",saleDes:"",reliability:"",reliabilityDes:"",isReadonly:!1},addrules:{name:[{required:!0,message:"请输入模块名称",trigger:"blur"}],basePrice:[{required:!0,message:"请输入基础价格",trigger:"blur"}],minCount:[{required:!0,message:"请输入最小数量",trigger:"blur"}],sale:[{required:!0,message:"请输入折扣规则",trigger:"blur"}],saleDes:[{required:!0,message:"请输入折扣规则描述",trigger:"blur"}],reliability:[{required:!0,message:"请输入可靠性验证规则",trigger:"blur"}],reliabilityDes:[{required:!0,message:"请输入可靠性验证规则",trigger:"blur"}]},editrules:{name:[{required:!0,message:"请输入模块名称",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],value:[{required:!0,message:"请输入模块名称",trigger:"blur"}],desc:[{required:!0,message:"请输入描述",trigger:"blur"}]}}},created:function(){this.accountid=this.$route.params.id,this.getData()},watch:{$routes:function(e){this.getData(this.$route.params.id)}},computed:{},methods:{addTemplate:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a={AccountId:t.$route.params.id,PtName:t.addForm.name,BasePrice:t.addForm.basePrice,MinSendCount:t.addForm.minCount,PriceOnsale:t.addForm.sale,PriceOnsaleDes:t.addForm.saleDes,ReliabilityCheckCount:t.addForm.reliability,ReliabilityCheckCountDes:t.addForm.reliabilityDes,IsReadonly:t.addForm.isReadonly};Object(l.b)(a).then(function(e){e.Success?(t.$message({showClose:!0,message:"新增成功",type:"success"}),t.getData(t.cur_page),t.addVisible=!1):t.$message.error(e.Message)})})},jumUrl:function(e){this.$router.push("/priceModuleDetail/"+e.PtId)},showAddForm:function(){this.addVisible=!0},getTemplateInfo:function(e){var t={ptid:e};Object(l.l)(t).then(function(e){})},_addParam:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a={ParamsName:t.addForm.name,ParamsValue:t.addForm.value,Description:t.addForm.desc};addSystemP(a).then(function(e){e.Success?(t.$message({showClose:!0,message:"添加成功",type:"success"}),t.getData(t.cur_page),t.addVisible=!1):t.$message.error(e.Message)})})},deleteData:function(e){var t=this;this.$confirm("此操作将永久删除该项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){deleteSystemP({id:e}).then(function(e){e.Success?(t.$message({type:"success",message:"删除成功!"}),t.getData()):t.$message.error(e.Message)}).catch(function(e){console.log("error")})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(e){this.pagesize=e,this.getData()},handleCurrentChange:function(e){this.cur_page=e,this.getData()},getData:function(){var e=this,t={pageindex:this.cur_page,pagesize:this.pagesize,accountid:this.accountid};Object(l.m)(t).then(function(t){e.tableData=t.Data.List,e.pageCount=t.Data.TotalCount})},search:function(){this.getData()}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}}),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.showAddForm}},[e._v("新增价格模板")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"PtId",align:"center",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"PtName",align:"center",label:"模板名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"BasePrice",align:"center",label:"基础价格(元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e._f("normalMoney")(t.row.BasePrice,t.row.BasePrice))+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"MinSendCount",align:"center",label:"最少发送条数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"PriceOnsale",align:"center",label:"折扣规则"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ReliabilityCheckCount",align:"center",label:"可靠性验证规则"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ReliabilityCheckCountDes",align:"center",label:"可靠性验证描述"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.jumUrl(t.row)}}},[e._v("查看内容")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","page-sizes":[10,20,30,40,50],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.pageCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加价格模板",visible:e.addVisible,width:"500px;"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addrules,"label-width":"180px",autocomplete:"off"}},[a("el-form-item",{attrs:{label:"模板名称:",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"基础价格:",prop:"basePrice"}},[a("el-input",{attrs:{placeholder:"请输入基础价格"},model:{value:e.addForm.basePrice,callback:function(t){e.$set(e.addForm,"basePrice",t)},expression:"addForm.basePrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"最低条数:",prop:"minCount"}},[a("el-input",{attrs:{placeholder:"请输入最低条数"},model:{value:e.addForm.minCount,callback:function(t){e.$set(e.addForm,"minCount",t)},expression:"addForm.minCount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"折扣规则:",prop:"sale"}},[a("el-input",{attrs:{placeholder:"请输入折扣规则"},model:{value:e.addForm.sale,callback:function(t){e.$set(e.addForm,"sale",t)},expression:"addForm.sale"}}),e._v("例如:100条以内5折，大于500条3折\n                ")],1),e._v(" "),a("el-form-item",{attrs:{label:"折扣规则描述",prop:"saleDes"}},[a("el-input",{attrs:{placeholder:"请输入折扣规则描述"},model:{value:e.addForm.saleDes,callback:function(t){e.$set(e.addForm,"saleDes",t)},expression:"addForm.saleDes"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"可靠性验证规则:",prop:"reliability"}},[a("el-input",{attrs:{placeholder:"请输入可靠性验证规则"},model:{value:e.addForm.reliability,callback:function(t){e.$set(e.addForm,"reliability",t)},expression:"addForm.reliability"}}),e._v("例如:100条以内5折，大于500条3折\n                ")],1),e._v(" "),a("el-form-item",{attrs:{label:"可靠性验证规则描述:",prop:"reliabilityDes"}},[a("el-input",{attrs:{placeholder:"请输入可靠性验证规则描述"},model:{value:e.addForm.reliabilityDes,callback:function(t){e.$set(e.addForm,"reliabilityDes",t)},expression:"addForm.reliabilityDes"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"只读"}},[a("el-switch",{model:{value:e.addForm.isReadonly,callback:function(t){e.$set(e.addForm,"isReadonly",t)},expression:"addForm.isReadonly"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addTemplate("addForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"查看模板内容",visible:e.editVisible,width:"500px"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.Form,rules:e.editrules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"内容类型:"}},[a("el-input",{model:{value:e.Form.name,callback:function(t){e.$set(e.Form,"name",t)},expression:"Form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模板内容:"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.template,callback:function(t){e.template=t},expression:"template"}},e._l(e.templateList,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"内容价格"}},[a("el-input",{model:{value:e.Form.price,callback:function(t){e.$set(e.Form,"price",t)},expression:"Form.price"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editVisible=!1}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"danger"}},[e._v("删除内容")])],1)],1)],1)],1)},staticRenderFns:[]};var s=a("C7Lr")(r,i,!1,function(e){a("rKKF")},"data-v-c41cd068",null);t.default=s.exports}});