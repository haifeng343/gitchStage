webpackJsonp([30],{bDzQ:function(e,t){},keJr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("lC5x"),n=a.n(r),s=a("J0Oq"),o=a.n(s),i=a("CcaF"),l={name:"basetable",data:function(){var e=this;return{tableData:[],cur_page:1,Id:"",phone:"",username:"",status:"",statusList:[{id:0,name:"全部"},{id:1,name:"等待审核"},{id:2,name:"审核中"},{id:3,name:"认证成功"},{id:4,name:"认证失败"},{id:5,name:"无效"}],statusList1:[{id:4,name:"审核拒绝"},{id:5,name:"管理员作废"}],ordersn:"",pageCount:0,pagesize:10,aayAccountName:"商家",addVisible:!1,editVisible:!1,changeVisible:!1,lookVisible:!1,addForm:{refundReason:"",refundmoney:"",goodsBasicMoney:"",ordersn:""},changeForm:{accountName:"商家",statusDes:"",status:""},lookForm:{accountName:"",appId:"",providerCode:"",appSecret:"",sign:""},editForm:{accountName:"",appId:"",providerCode:"",appSecret:"",channelId:""},addrules:{refundmoney:[{validator:function(t,a,r){if(console.log(a),!a)return r(new Error("退款金额不能为空"));a>e.addForm.goodsBasicMoney?r(new Error("退款金额不能大于充值金额")):parseFloat(a)?r():r(new Error("请输入正确的金额"))},required:!0,trigger:"blur"}],refundReason:[{required:!0,message:"请输入退款原因",trigger:"blur"}]},changerules:{status:[{required:!0,message:"请选择",trigger:"change"}],statusDes:[{required:!0,message:"请输入描述",trigger:"blur"}]},editrules:{appId:[{required:!0,message:"请输入appId",trigger:"blur"}],providerCode:[{required:!0,message:"请输入第三方平台",trigger:"blur"}],appSecret:[{required:!0,message:"请输入秘匙",trigger:"blur"}]}}},created:function(){void 0!=this.$route.query.accountname&&(this.username=this.$route.query.accountname,this.phone=this.$route.query.accountphone),this.getData()},watch:{$route:function(e,t){void 0!=this.$route.query.accountname&&(this.username=this.$route.query.accountname,this.phone=this.$route.query.accountphone)},username:function(){this.getData()}},computed:{},methods:{jumpUrl:function(e){localStorage.setItem("license",e.License),this.$router.push("/license")},look:function(e){this.lookVisible=!0,this.lookForm.appId=e.AppId,this.lookForm.providerCode=e.ProviderCode,this.lookForm.appSecret=e.AppSecret,this.lookForm.sign=e.Sign},handleEdit:function(e){this.editVisible=!0,this.ctId=e.ChannelId,this.editForm.accountName=e.AccountNickName,this.editForm.appId=e.AppId,this.editForm.appSecret=e.appSecret,this.editForm.providerCode=e.ProviderCode},saveEdit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a={id:t.ctId,providercode:t.editForm.providerCode,appid:t.editForm.appId,appsecret:t.editForm.appSecret};Object(i.d)(a).then(function(e){e.Success?(t.$message({showClose:!0,message:"修改成功",type:"success"}),t.getData(t.cur_page),t.editVisible=!1):t.$message(e.Message)})})},_submitSCAudit:function(e){var t=this;this.$confirm("您确定要提交审核吗?","提交审核",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:e.ChannelId};Object(i.A)(a).then(function(e){e.Success?(t.$message({showClose:!0,message:"提交成功",type:"success"}),t.getData(t.cur_page)):t.$message.error(e.Message)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},openDetail:function(e){var t=this;this.editVisible=!0,this.aayAccountName=e.PayAccountName;var a={ordersn:e.OrderSN};getRefundDetail(a).then(function(e){t.editForm.refundReason=e.Data.Reason,t.editForm.refundmoney=e.Data.RefundMoney/100,t.editForm.time=e.Data.FinishTime})},changeStatus:function(e){this.changeVisible=!0,this.ctId=e.ChannelId,this.changeForm.statusDes=e.StatusDes,this.changeForm.accountName=e.AccountNickName},_changeStatus:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$confirm("您确定要修改状态吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={ChannelId:t.ctId,Status:t.changeForm.status,ErrorRemark:t.changeForm.statusDes};Object(i.y)(e).then(function(e){e.Success?(t.$message({showClose:!0,message:"修改成功",type:"success"}),t.getData(t.cur_page),t.changeVisible=!1):t.$message.error(e.Message)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})})},getStatus:function(e){switch(e){case 1:return"等待审核";case 2:return"审核中";case 3:return"认证成功";case 4:return"认证失败";case 5:return"无效"}},getThirdStatus:function(e){switch(e){case 0:return"待审核";case 1:return"审核中";case 2:return"审核成功";case 3:return"审核失败"}},handleSizeChange:function(e){this.pagesize=e,this.getData()},handleCurrentChange:function(e){this.cur_page=e,this.getData()},getData:function(){var e=this;return o()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={Status:e.status,pageindex:e.cur_page,pagecount:e.pagesize,accountname:e.username,accountphone:e.phone},t.next=3,Object(i.s)(a).then(function(t){e.tableData=t.Data.List,e.pageCount=t.Data.TotalCount});case 3:case"end":return t.stop()}},t,e)}))()},search:function(){this.getData()},getTime:function(){null!=this.time&&this.time.length>0?(this.starttime=this.time[0],this.endtime=this.time[1]):(this.starttime="",this.endtime="")}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}}),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("label",{attrs:{for:""}},[e._v("商家名称:")]),e._v(" "),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"请输入商户名称"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("手机号:")]),e._v(" "),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"请输入手机号"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("状态:")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.statusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-button",{staticStyle:{color:"018AD8"},attrs:{icon:"search"},on:{click:e.search}},[e._v("搜索")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"ChannelId",align:"center",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"AccountNickName",align:"center",label:"商家名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"AccountPhone",align:"center",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"SignName",align:"center",label:"短信签名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"TemplateName",align:"center",label:"营业执照"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.jumpUrl(t.row)}}},[e._v("查看")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Status",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.changeStatus(t.row)}}},[e._v(e._s(e.getStatus(t.row.Status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"StatusDes",align:"center",label:"状态描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ThirdStatus",align:"center",label:"第三方状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e.getThirdStatus(t.row.ThirdStatus))+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ProviderCode",align:"center",label:"第三方短信平台信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.look(t.row)}}},[e._v(e._s(t.row.ProviderCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ThirdSignId",align:"center",label:"第三方签名ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"CallbackInfo",align:"center",label:"第三方回调数据"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Time",align:"center",label:"申请时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e._f("normalTime")(t.row.Time,t.row.Time))+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("设置应用")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e._submitSCAudit(t.row)}}},[e._v("提交审核")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","page-sizes":[10,20,30,40,50],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.pageCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"状态修改-"+e.changeForm.accountName,visible:e.changeVisible,width:"663px"},on:{"update:visible":function(t){e.changeVisible=t}}},[a("el-form",{ref:"changeForm",attrs:{model:e.changeForm,rules:e.changerules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"状态:",prop:"status"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.changeForm.status,callback:function(t){e.$set(e.changeForm,"status",t)},expression:"changeForm.status"}},e._l(e.statusList1,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态描述",prop:"statusDes"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入状态描述"},model:{value:e.changeForm.statusDes,callback:function(t){e.$set(e.changeForm,"statusDes",t)},expression:"changeForm.statusDes"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"dialog-certain",attrs:{type:"primary",size:"medium"},on:{click:function(t){e._changeStatus("changeForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑短信模板-"+e.editForm.accountName,visible:e.editVisible,width:"633px"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editrules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"第三方平台:",prop:"providerCode"}},[a("el-input",{model:{value:e.editForm.providerCode,callback:function(t){e.$set(e.editForm,"providerCode",t)},expression:"editForm.providerCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用标识:",prop:"appId"}},[a("el-input",{model:{value:e.editForm.appId,callback:function(t){e.$set(e.editForm,"appId",t)},expression:"editForm.appId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用秘匙:",prop:"appId"}},[a("el-input",{model:{value:e.editForm.appSecret,callback:function(t){e.$set(e.editForm,"appSecret",t)},expression:"editForm.appSecret"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"dialog-certain",attrs:{type:"primary",size:"medium"},on:{click:function(t){e.saveEdit("editForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"第三方模板ID",visible:e.lookVisible,width:"633px"},on:{"update:visible":function(t){e.lookVisible=t}}},[a("el-form",{ref:"lookForm",attrs:{model:e.lookForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"第三方平台:"}},[a("span",[e._v(e._s(e.lookForm.providerCode))])]),e._v(" "),a("el-form-item",{attrs:{label:"应用标识:"}},[a("span",[e._v(e._s(e.lookForm.appId))])]),e._v(" "),a("el-form-item",{attrs:{label:"应用秘匙"}},[a("span",[e._v(e._s(e.lookForm.appSecret))])])],1)],1)],1)],1)},staticRenderFns:[]};var u=a("C7Lr")(l,c,!1,function(e){a("bDzQ")},"data-v-6d40ab1e",null);t.default=u.exports}});